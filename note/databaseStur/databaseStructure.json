{
  "analysisDescription": {
    "purpose": "This JSON object provides a comprehensive structural analysis of the SQLite database. It includes details on tables, columns, and foreign key relationships.",
    "tableNames": "An array of strings, where each string is the name of a table in the database. System tables (e.g., 'sqlite_%') are excluded.",
    "createStatements": "An object where each key is a table name (string) and the corresponding value is the full 'CREATE TABLE' SQL statement (string) for that table. This allows for a complete reconstruction of the table's schema.",
    "tablesInfo": {
      "description": "An object where each key is a table name (string). The value is an array of objects, with each object providing detailed information about a single column in that table, based on SQLite's `PRAGMA table_info`.",
      "columnSchema": {
        "cid": "Column ID (integer): The zero-indexed position of the column in the table.",
        "name": "Column Name (string): The name of the column.",
        "type": "Data Type (string): The declared data type of the column (e.g., 'TEXT', 'INTEGER', 'REAL').",
        "notnull": "Not Null Constraint (integer): 1 if the column has a 'NOT NULL' constraint, 0 otherwise.",
        "dflt_value": "Default Value (any): The default value for the column. It is `null` if no default value is specified.",
        "pk": "Primary Key (integer): 1 if this column is part of the primary key, 0 otherwise. For a composite primary key, this will be 1 for all columns in the key."
      }
    },
    "foreignKeys": {
      "description": "An object where each key is a table name (string). The value is an array of objects, with each object describing a foreign key constraint originating from that table, based on SQLite's `PRAGMA foreign_key_list`.",
      "foreignKeySchema": {
        "id": "Constraint ID (integer): A unique ID for the foreign key constraint within the table.",
        "seq": "Sequence Number (integer): The sequence number (starting from 0) for columns in a composite foreign key.",
        "table": "Parent Table (string): The name of the parent table that the foreign key references.",
        "from": "Child Column (string): The name of the column in the child table (the current table) that is part of the foreign key.",
        "to": "Parent Column (string): The name of the column in the parent table that is being referenced.",
        "on_update": "On Update Action (string): The action to take on 'ON UPDATE' (e.g., 'NO ACTION', 'CASCADE', 'SET NULL').",
        "on_delete": "On Delete Action (string): The action to take on 'ON DELETE' (e.g., 'NO ACTION', 'CASCADE', 'SET NULL').",
        "match": "Match Clause (string): The 'MATCH' clause for the foreign key (usually 'NONE')."
      }
    }
  },
  "tableNames": [
    "users",
    "marketplace_products",
    "order_items",
    "user_tokens",
    "updates",
    "orders"
  ],
  "createStatements": {
    "sqlite_sequence": "CREATE TABLE sqlite_sequence(name,seq)",
    "users": "CREATE TABLE users (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  username TEXT NOT NULL,\n  phone TEXT NOT NULL UNIQUE,\n  Password TEXT,\n  Address TEXT,\n  user_key TEXT NOT NULL UNIQUE,\n  is_seller INTEGER DEFAULT 0\n)",
    "marketplace_products": "CREATE TABLE marketplace_products (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  productName TEXT NOT NULL,\n  product_key TEXT NOT NULL UNIQUE,\n  user_key TEXT NOT NULL,\n  product_description TEXT,\n  product_price REAL NOT NULL,\n  product_quantity INTEGER NOT NULL,\n  user_message TEXT,\n  user_note TEXT,\n  ImageName TEXT,\n  MainCategory INTEGER,\n  SubCategory INTEGER,\n  ImageIndex INTEGER, original_price REAL, serviceType INTEGER DEFAULT 0,\n  FOREIGN KEY (user_key) REFERENCES users(user_key)\n    ON DELETE CASCADE\n    ON UPDATE CASCADE\n)",
    "order_items": "CREATE TABLE order_items (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  order_key TEXT NOT NULL,\n  product_key TEXT NOT NULL,\n  quantity INTEGER NOT NULL,\n  seller_key TEXT,  -- البائع (نفس user_key من جدول المنتجات)\n\n  FOREIGN KEY (order_key) REFERENCES orders(order_key) ON DELETE CASCADE ON UPDATE CASCADE,\n  FOREIGN KEY (product_key) REFERENCES marketplace_products(product_key) ON DELETE CASCADE ON UPDATE CASCADE,\n  FOREIGN KEY (seller_key) REFERENCES users(user_key) ON DELETE CASCADE ON UPDATE CASCADE\n)",
    "user_tokens": "CREATE TABLE user_tokens (\n  id INTEGER PRIMARY KEY AUTOINCREMENT,\n  user_key TEXT NOT NULL,\n  fcm_token TEXT NOT NULL,\n  created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n, platform TEXT)",
    "updates": "CREATE TABLE updates (\n    Id INTEGER PRIMARY KEY AUTOINCREMENT,\n    txt TEXT,\n    datetime DATETIME DEFAULT CURRENT_TIMESTAMP\n)",
    "orders": "CREATE TABLE \"orders\" (\n\t`order_key` text NOT NULL UNIQUE,\n\t`user_key` text NOT NULL,\n\t`total_amount` real NOT NULL,\n\t`order_status` integer DEFAULT '0' NOT NULL,\n\t`created_at` numeric DEFAULT CURRENT_TIMESTAMP,\n\tFOREIGN KEY (`user_key`) REFERENCES `users`(`user_key`) ON UPDATE NO ACTION ON DELETE NO ACTION\n)"
  },
  "tablesInfo": {
    "users": [
      {
        "cid": 0,
        "name": "id",
        "type": "INTEGER",
        "notnull": 0,
        "dflt_value": null,
        "pk": 1
      },
      {
        "cid": 1,
        "name": "username",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 2,
        "name": "phone",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 3,
        "name": "Password",
        "type": "TEXT",
        "notnull": 0,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 4,
        "name": "Address",
        "type": "TEXT",
        "notnull": 0,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 5,
        "name": "user_key",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 6,
        "name": "is_seller",
        "type": "INTEGER",
        "notnull": 0,
        "dflt_value": "0",
        "pk": 0
      }
    ],
    "marketplace_products": [
      {
        "cid": 0,
        "name": "id",
        "type": "INTEGER",
        "notnull": 0,
        "dflt_value": null,
        "pk": 1
      },
      {
        "cid": 1,
        "name": "username",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 2,
        "name": "phone",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 3,
        "name": "Password",
        "type": "TEXT",
        "notnull": 0,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 4,
        "name": "Address",
        "type": "TEXT",
        "notnull": 0,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 5,
        "name": "user_key",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 6,
        "name": "is_seller",
        "type": "INTEGER",
        "notnull": 0,
        "dflt_value": "0",
        "pk": 0
      }
    ],
    "order_items": [
      {
        "cid": 0,
        "name": "id",
        "type": "INTEGER",
        "notnull": 0,
        "dflt_value": null,
        "pk": 1
      },
      {
        "cid": 1,
        "name": "username",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 2,
        "name": "phone",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 3,
        "name": "Password",
        "type": "TEXT",
        "notnull": 0,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 4,
        "name": "Address",
        "type": "TEXT",
        "notnull": 0,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 5,
        "name": "user_key",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 6,
        "name": "is_seller",
        "type": "INTEGER",
        "notnull": 0,
        "dflt_value": "0",
        "pk": 0
      }
    ],
    "user_tokens": [
      {
        "cid": 0,
        "name": "id",
        "type": "INTEGER",
        "notnull": 0,
        "dflt_value": null,
        "pk": 1
      },
      {
        "cid": 1,
        "name": "username",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 2,
        "name": "phone",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 3,
        "name": "Password",
        "type": "TEXT",
        "notnull": 0,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 4,
        "name": "Address",
        "type": "TEXT",
        "notnull": 0,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 5,
        "name": "user_key",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 6,
        "name": "is_seller",
        "type": "INTEGER",
        "notnull": 0,
        "dflt_value": "0",
        "pk": 0
      }
    ],
    "updates": [
      {
        "cid": 0,
        "name": "id",
        "type": "INTEGER",
        "notnull": 0,
        "dflt_value": null,
        "pk": 1
      },
      {
        "cid": 1,
        "name": "username",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 2,
        "name": "phone",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 3,
        "name": "Password",
        "type": "TEXT",
        "notnull": 0,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 4,
        "name": "Address",
        "type": "TEXT",
        "notnull": 0,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 5,
        "name": "user_key",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 6,
        "name": "is_seller",
        "type": "INTEGER",
        "notnull": 0,
        "dflt_value": "0",
        "pk": 0
      }
    ],
    "orders": [
      {
        "cid": 0,
        "name": "id",
        "type": "INTEGER",
        "notnull": 0,
        "dflt_value": null,
        "pk": 1
      },
      {
        "cid": 1,
        "name": "username",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 2,
        "name": "phone",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 3,
        "name": "Password",
        "type": "TEXT",
        "notnull": 0,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 4,
        "name": "Address",
        "type": "TEXT",
        "notnull": 0,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 5,
        "name": "user_key",
        "type": "TEXT",
        "notnull": 1,
        "dflt_value": null,
        "pk": 0
      },
      {
        "cid": 6,
        "name": "is_seller",
        "type": "INTEGER",
        "notnull": 0,
        "dflt_value": "0",
        "pk": 0
      }
    ]
  },
  "foreignKeys": {
    "users": [
      {
        "id": 0,
        "seq": 0,
        "table": "users",
        "from": "user_key",
        "to": "user_key",
        "on_update": "CASCADE",
        "on_delete": "CASCADE",
        "match": "NONE"
      }
    ],
    "marketplace_products": [
      {
        "id": 0,
        "seq": 0,
        "table": "users",
        "from": "user_key",
        "to": "user_key",
        "on_update": "CASCADE",
        "on_delete": "CASCADE",
        "match": "NONE"
      }
    ],
    "order_items": [
      {
        "id": 0,
        "seq": 0,
        "table": "users",
        "from": "user_key",
        "to": "user_key",
        "on_update": "CASCADE",
        "on_delete": "CASCADE",
        "match": "NONE"
      }
    ],
    "user_tokens": [
      {
        "id": 0,
        "seq": 0,
        "table": "users",
        "from": "user_key",
        "to": "user_key",
        "on_update": "CASCADE",
        "on_delete": "CASCADE",
        "match": "NONE"
      }
    ],
    "updates": [
      {
        "id": 0,
        "seq": 0,
        "table": "users",
        "from": "user_key",
        "to": "user_key",
        "on_update": "CASCADE",
        "on_delete": "CASCADE",
        "match": "NONE"
      }
    ],
    "orders": [
      {
        "id": 0,
        "seq": 0,
        "table": "users",
        "from": "user_key",
        "to": "user_key",
        "on_update": "CASCADE",
        "on_delete": "CASCADE",
        "match": "NONE"
      }
    ]
  }
}