<!-- 
@file notification/page/notifications.html
@description Displays the user's notifications list with states for loading, empty, and error.
-->
<body>
    <!-- ملفات JavaScript -->
    <link rel="stylesheet" href="notification/page/notifications.css">

    <!-- الحاوية الرئيسية -->
    <div class="notifications-container" id="notifications-container">

        <!-- Header Removed as requested -->

        <!-- إعدادات الإشعارات -->
        <div class="notifications-settings" id="notifications-settings">
            <div class="settings-item">
                <div class="settings-info">
                    <h3 id="toggle-title" data-lkey="notification_disabled_title">تفعيل الإشعارات</h3>
                    <p id="toggle-desc" data-lkey="notification_disabled_desc">استلام تنبيهات فورية عند وصول رسائل أو تحديثات جديدة</p>
                </div>
                <label class="switch">
                    <input type="checkbox" id="notification-master-toggle">
                    <span class="slider"></span>
                </label>
            </div>
        </div>

        <!-- قائمة الإشعارات -->
        <main class="notifications-list" id="notifications-list">
            <!-- سيتم ملء الإشعارات هنا بواسطة JavaScript -->
        </main>

        <!-- حالات الصفحة -->
        <div class="state-container" id="loading-state">
            <div class="loading-state">
                <i class="fas fa-spinner fa-spin"></i>
                <h3 data-lkey="notifications_loading">جاري تحميل الإشعارات...</h3>
            </div>
        </div>

        <div class="state-container" id="empty-state">
            <div class="empty-state">
                <i class="far fa-bell-slash"></i>
                <h3 data-lkey="notifications_empty_title">لا توجد إشعارات حتى الآن</h3>
                <p data-lkey="notifications_empty_desc">سيظهر هنا أي إشعارات تصل إليك</p>
            </div>
        </div>

        <div class="state-container" id="error-state">
            <div class="error-state">
                <i class="fas fa-exclamation-triangle"></i>
                <h3 data-lkey="notifications_error_title">حدث خطأ أثناء تحميل الإشعارات</h3>
                <p class="error-message" data-lkey="notifications_error_desc">فشل في تحميل الإشعارات. تأكد من اتصالك بالإنترنت.</p>
                <button class="btn btn-primary" onclick="window.location.reload()">
                    <i class="fas fa-redo"></i> <span data-lkey="notifications_retry_btn">إعادة المحاولة</span>
                </button>
            </div>
        </div>
    </div>

    <!-- IndexedDB functions declaration (for development purposes) -->
    <script>
        /**
         * @description Initializes the notifications page logic and global notification system.
         * Requests browser notification permissions if default.
         */

        // Initialize notification page logic
        if (typeof NotificationPage !== 'undefined') {
            NotificationPage.init();
        }

        // Initialize global counter if not automatically loaded
        if (window.GLOBAL_NOTIFICATIONS && typeof window.GLOBAL_NOTIFICATIONS.init === 'function') {
            window.GLOBAL_NOTIFICATIONS.init();
        }

        // Request browser notification permission
        if ('Notification' in window && Notification.permission === 'default') {
            Notification.requestPermission();
        }
    </script>
</body>